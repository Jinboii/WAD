<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <!--Meta “viewport” is used to make the web page responsive to the browser/device width-->
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- BootStrap and Javascript-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta content="" name="keywords">
        <meta content="" name="description">

        <!-- Google Web Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Playball&display=swap" rel="stylesheet">

        <!-- Icon Font Stylesheet -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

        <!-- Libraries Stylesheet -->
        <link href="lib/animate/animate.min.css" rel="stylesheet">
        <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">
        <link href="lib/owlcarousel/owl.carousel.min.css" rel="stylesheet">

        <!-- Customized Bootstrap Stylesheet -->
        <link href="css/bootstrap.min.css" rel="stylesheet">

        <!-- Template Stylesheet -->
        <link href="css/style.css" rel="stylesheet">
        <title>User Analytics</title>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    </head>

    <body onload="org_display()">
        <div class="container-fluid nav-bar">
            <div class="container">
                <nav class="navbar navbar-light navbar-expand-lg py-4">
                    <a href="index.html" class="navbar-brand">
                        <h1 class="text-primary fw-bold mb-0">Re<span class="text-dark">Birth</span> </h1>
                    </a>
                    <button class="navbar-toggler py-2 px-3" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                        <span class="fa fa-bars text-primary"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarCollapse">
                        <div class="navbar-nav mx-auto">
                            <a href="index.html" class="nav-item nav-link active">Home</a>
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Listings</a>
                                <div class="dropdown-menu bg-light">
                                    <a href="listing.html" class="dropdown-item">All</a>
                                    <a href="listing.html?category=Food" class="dropdown-item">Food</a>
                                    <a href="listing.html?category=Education" class="dropdown-item">Educational Materials</a>
                                    <a href="listing.html?category=Clothing" class="dropdown-item">Clothing</a>
                                    <a href="listing.html?category=Electronics" class="dropdown-item">Electronics</a>
                                </div>
                            </div>
                            <a href="blog.html" class="nav-item nav-link">Community</a>
                        
                            <a href="contact.html" class="nav-item nav-link">Contact</a>
                        </div>
                        <button class="btn-search btn btn-primary btn-md-square me-4 rounded-circle d-none d-lg-inline-flex" data-bs-toggle="modal" data-bs-target="#searchModal"><i class="fas fa-search"></i></button>
                        <a href="logout.php" id="loginandout" class="btn btn-primary py-2 px-4 d-none d-xl-inline-block rounded-pill"></a>
                    </div>
                </nav>
            </div>
        </div>
        <!-- Navbar End -->
        
        <!-- Modal Search Start -->
        <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-fullscreen">
                <div class="modal-content rounded-0">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Search by keyword</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body d-flex align-items-center">
                        <div class="input-group w-75 mx-auto d-flex">
                            <input type="search" class="form-control bg-transparent p-3" placeholder="keywords" aria-describedby="search-icon-1">
                            <span id="search-icon-1" class="input-group-text p-3"><i class="fa fa-search"></i></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal Search End -->

        <div class="container-fluid contact py-6 wow bounceInUp" data-wow-delay="0.1s">
            <div class="container">
                <div class="p-5 bg-light rounded contact-form">
                    <div class="row g-4">
                        <div class="col-12">
                            
                            <h1 class="display-5 mb-0 mx-auto text-center">About Organization</h1>
                        </div>
                        
                        <div class="col-12">
                            <div>
                                <div class="d-inline-flex w-100 border border-primary p-4 rounded mb-4">
                                    <i class="fas fa-user fa-2x text-primary me-4"></i>
                                    <div class="">
                                        <div id="orgname"></div>
                                    
                                    </div>
                                </div>
                                <div class="d-inline-flex w-100 border border-primary p-4 rounded mb-4">
                                    <i class="fas fa-info fa-2x text-primary me-4"></i>
                                    <div class="">
                                        <div id="orgdesc"><h4>Organization description to edit</h4></div>
                                        
                                    </div>
                                </div>

                                <div class="d-inline-flex w-100 border border-primary p-4 rounded">
                                    <i class="fas fa-solid fa-clock fa-2x text-primary me-4"></i>
                                    <div class="">
                                        <h4>Current: <div id="current"></div></h4>
                                        
                                    </div>
                                </div>

                                <div class="d-inline-flex w-100 border border-primary p-4 rounded mb-4">
                                    <i class="fas fa-info fa-2x text-primary me-4"></i>
                                    <div class="">
                                        <h4>Successes: <div id="archive"></div></h4>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
       
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!--Meta “viewport” is used to make the web page responsive to the browser/device width-->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Organization</title>
    
        <!-- Bootstrap & Javascript -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    </head>



    <script>
        

        function org_display() {

            
            var current_link = window.location.href;
            var org_string_position = current_link.search("Organization") + 13;
            var userid2 = current_link.substr(org_string_position);
        
            let usercheck_url = "userlog.php"

            axios.get(usercheck_url) //FIRST AXIOS START  --CHECK FOR USERTYPE & USERID
            .then(response => {

            var user_id = response.data[0].userid;
            var user_type = response.data[0].usertype;
            console.log(response.data)

            if (user_id=='' || user_id == undefined || user_id== null) {
                var loginandout = document.getElementById("loginandout");
                var loginandout_textnode = document.createTextNode("Login");
                loginandout.appendChild(loginandout_textnode);
                loginandout.href = "login.html";
            }
            else {
                var loginandout = document.getElementById("loginandout");
                var loginandout_textnode = document.createTextNode("Logout");
                loginandout.appendChild(loginandout_textnode);
                
                var profileicon = document.getElementById("profileicon");
                var profileiconElement = document.createElement("i");
                profileiconElement.classList.add("fa-solid", "fa-user");
                var profilelink = document.createElement("a");
                profilelink.setAttribute("href", "analytics.html");
                profilelink.appendChild(profileiconElement);
                profileicon.appendChild(profilelink);



                if (user_type == "organization") {
                    
                    var sortcat = document.getElementById("sortcat");
                    sortcat.setAttribute("class","d-none");

                    var hiddencat = document.getElementById("hiddencat");
                    hiddencat.href = "listing.html";
                    hiddencat.setAttribute("class","nav-item nav-link");
                    hiddencat_textnode = document.createTextNode("Listings");
                    hiddencat.appendChild(hiddencat_textnode);


                    var org_link = "organization.html?Organization=".concat(user_id);
                    profilelink.setAttribute("href",org_link);
                }

                profilelink.appendChild(profileimg);

                profileicon.appendChild(profilelink);
                
                loginandout.href = "logout.php"; 
            }}).catch(error => {     
                    console.log(error.message)
                })



            console.log(userid2);

            document.getElementById("orgname").innerHTML = "<h4>".concat(userid2,"</h4>")
            let display_url = "display.php"
            let para = {userid : userid2, 
                usertype : "organization"} ;  

            axios.get(display_url, {params:para}) 
                .then(response => {
                    
            var listing_list = response.data;
                  
            for (list in listing_list) {
                var listing_id = listing_list[list].listing_id; 
                var title = listing_list[list].title;
                var description = listing_list[list].description;
                var category = listing_list[list].category;
                var image = listing_list[list].image;
                var organization = listing_list[list].organization;
                var donater = listing_list[list].donater;
                        
                var img_directory = "uploads/";
                var img_link = img_directory.concat(image);
                        
                         
                
                //#card
var card = document.createElement("span");
card.setAttribute("class", "col-md-6 col-lg-4 wow bounceInUp");
card.setAttribute("data-wow-delay", "0.1s");
card.setAttribute("id", listing_id);

               
                //#image
var cardimg = document.createElement("img");
cardimg.setAttribute("src", img_link);
cardimg.setAttribute("class", "img-thumbnail");
cardimg.setAttribute("style", "width: 420px; height: 420px; object-fit: cover");
cardimg.setAttribute("alt", "");
card.appendChild(cardimg);

                //#card-body
                
                var cardbody = document.createElement("div");
cardbody.setAttribute("class", "card-text mx-4 d-flex rounded bg-light");

                //#title
                var cardtitle = document.createElement("h4");
cardtitle.setAttribute("class", "card-title mx-4 d-flex rounded bg-light");
var ctitle = document.createTextNode(title);
cardtitle.appendChild(ctitle);

                //#card-text
                var cardtext = document.createElement("p");
cardtext.setAttribute("class", "card-text mx-4 d-flex rounded bg-light");
cardtext.setAttribute("class", "text-dark bg-primary rounded-start");
cardtext.setAttribute("class", "h-100 p-3 d-flex flex-column justify-content-center text-center");
var ctext = document.createTextNode(description);
cardtext.appendChild(ctext);

                //Attach card components to card-body
                cardbody.appendChild(cardtitle);
cardbody.appendChild(cardtext);
card.appendChild(cardbody);    


                

                document.getElementById("current").appendChild(card);
                }
                    
                    
                })
                .catch(error => {
                    console.log(error.message)
                })  



            let display_archive_url = "displayarchive.php"
                

                axios.get(display_archive_url, {params:para}) 
                .then(response => {
                    
                var archive_list = response.data;

                  
                for (archive in archive_list) {
                    var listing_id = archive_list[archive].listing_id; 
                    var title = archive_list[archive].title;
                    var description = archive_list[archive].description;
                    var category = archive_list[archive].category;
                    var image = archive_list[archive].image;
                    var organization = archive_list[archive].organization;
                    var donater = archive_list[archive].donater;
                        
                    var img_directory = "uploads/";
                    var img_link = img_directory.concat(image);
                        
                         
                     //#card
var card = document.createElement("span");
card.setAttribute("class", "col-md-6 col-lg-4 wow bounceInUp");
card.setAttribute("data-wow-delay", "0.1s");
card.setAttribute("id", listing_id);

               
                //#image
var cardimg = document.createElement("img");
cardimg.setAttribute("src", img_link);
cardimg.setAttribute("class", "img-thumbnail");
cardimg.setAttribute("style", "width: 420px; height: 420px; object-fit: cover");
cardimg.setAttribute("alt", "");
card.appendChild(cardimg);

                //#card-body
                
                var cardbody = document.createElement("div");
cardbody.setAttribute("class", "card-text mx-4 d-flex rounded bg-light");

                //#title
                var cardtitle = document.createElement("h4");
cardtitle.setAttribute("class", "card-title mx-4 d-flex rounded bg-light");
var ctitle = document.createTextNode(title);
cardtitle.appendChild(ctitle);

                //#card-text
                var cardtext = document.createElement("p");
cardtext.setAttribute("class", "card-text mx-4 d-flex rounded bg-light");
cardtext.setAttribute("class", "text-dark bg-primary rounded-start");
cardtext.setAttribute("class", "h-100 p-3 d-flex flex-column justify-content-center text-center");
var ctext = document.createTextNode(description);
cardtext.appendChild(ctext);

                //Attach card components to card-body
                cardbody.appendChild(cardtitle);
cardbody.appendChild(cardtext);
card.appendChild(cardbody);    
                        

                    document.getElementById("archive").appendChild(card);
                }
                    
                    
                })
                .catch(error => {
                    console.log(error.message)
                })  
      


        }
    </script>
    </body>
</html>
